/* =====================================================================
    Responsive layout
===================================================================== */

/* =====================================================================
    Mobile First - Small screens (phones)
===================================================================== */
@media (max-width: 768px) {
    html {
        font-size: 10px;
    }

    body {
        flex-direction: row; /* MANTENER layout horizontal */
        height: auto; /* Altura natural para scroll global */
        padding: 0;
        margin: 0;
        overflow: auto; /* Permitir scroll global */
        min-height: 100vh; /* Mínimo pantalla completa */
    }

    /* Canvas container - MANTENER VISIBLE pero más pequeño */
    #canvas-container {
        flex: 1;
        min-width: 80px; /* Más estrecho pero visible */
        position: relative;
    }

    /* Left panel - Players (más estrecho) */
    #left {
        width: 25%;
        min-width: 140px;
        padding: 0.5rem;
        overflow-y: visible; /* Sin scroll propio */
    }

    /* Right panel - Compositions (más estrecho) */
    #right {
        width: 35%;
        min-width: 160px;
        padding: 0.5rem;
        margin-left: 0;
        overflow-y: visible; /* Sin scroll propio */
        max-height: none; /* Sin límite de altura */
        display: flex;
        flex-direction: column;
    }

    /* Search bars - más compactas */
    .search-bar,
    .search-comp-bar {
        flex-direction: column;
        gap: 0.25rem;
        margin-bottom: 0.5rem;
    }

    .search-bar > *,
    .search-comp-bar > * {
        width: 100%;
        min-width: 0;
    }

    .server-selector,
    .set-selector {
        flex: none;
    }

    .search-input {
        flex: 1;
        min-width: 0;
    }

    /* Double up button - más pequeño */
    .double-up-btn-container {
        margin-bottom: 0.5rem;
        text-align: center;
    }

    .btn-color-mode-switch > label.btn-color-mode-switch-inner {
        height: 20px;
        font-size: 9px;
    }

    .btn-color-mode-switch > label.btn-color-mode-switch-inner:before {
        font-size: 8px;
        right: 10px;
        top: 3px;
    }

    .btn-color-mode-switch > label.btn-color-mode-switch-inner:after {
        height: 14px;
        font-size: 8px;
        padding: 2px 0px;
        top: 1px;
    }

    .btn-color-mode-switch input[type="checkbox"]:checked + label.btn-color-mode-switch-inner:before {
        transform: translateX(-35px);
    }

    /* Players - más compactos */
    .item.player {
        padding: 2px 4px;
        font-size: 0.7rem;
        min-height: 32px;
    }

    .player-name {
        font-size: 0.65rem;
        margin-left: -10px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        flex: 1 1 0; /* Use available space but allow shrinking to 0 */
        min-width: 0; /* Allow shrinking below content size */
        max-width: calc(100% - 45px); /* Reserve space for mini-rank-div */
    }

    .mini-rank-div {
        min-width: 40px;
        max-width: 40px; /* Prevent growing in mobile */
        flex-shrink: 0; /* Never shrink */
    }

    .mini-rank-img {
        width: 20px;
        height: 20px;
    }

    .mini-rank-icon {
        width: 16px;
        height: 16px;
    }

    .mini-rank-text {
        font-size: 0.6em;
    }

    .mini-rank-lp-text {
        font-size: 0.6em;
    }

    /* Ocultar botones de acción en mobile */
    .player-action-container {
        display: none !important;
    }

    /* Compositions - más compactas PERO LEGIBLES */
    .item.compo {
        padding: 3px 4px 3px 0px;
        font-size: 0.75rem;
        height: 28px; /* Más compacto para ver más comps */
        min-height: 28px;
        gap: 3px;
    }

    /* OCULTAR elementos para ahorrar espacio */
    .comp-star {
        display: none !important;
    }

    .main-augment-item-container {
        display: none !important;
    }

    .items-container {
        display: none !important;
    }

    /* OCULTAR unit icons completamente */
    .unit-icons {
        display: none !important;
    }

    /* Info de composición más legible */
    .comp-info {
        font-size: 0.8rem;
        min-width: 60px;
        text-align: left;
        flex: 1;
        font-weight: 600; /* Más bold para mejor visibilidad */
    }

    .comp-style {
        flex: 0 0 24px;
        font-size: 0.65rem;
    }

    /* Gradient border para mobile - ajustado */
    .border-gradient {
        width: 3px;
        left: -3px;
        height: 28px; /* Ajustado a la nueva altura */
        border-radius: 4px 0 0 4px;
    }

    .item.compo {
        border-left: 3px solid transparent;
    }

    /* Asegurar que el contenedor de comps sea scrollable */
    #comps {
        flex: 1;
        overflow-y: auto;
        max-height: calc(100vh - 120px); /* Dejar espacio para barra de búsqueda */
    }

    /* Ocultar elementos secundarios pero MANTENER funcionalidad principal */
    .table-container {
        display: none !important;
    }

    #infoTableContainer {
        display: none !important;
    }

    /* Ocultar core items */
    #coreItemsContainer {
        display: none !important;
    }

    /* Tags container - hacer scrollable horizontal */
    #comp-tags-container {
        white-space: nowrap;
        overflow-x: auto;
        margin-bottom: 0.25rem;
        padding: 2px 0;
    }

    #comp-tags-container::-webkit-scrollbar {
        height: 3px;
    }

    #comp-tags-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
    }

    #comp-tags-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
    }

    /* Popup/Modal overrides */
    #popupOverlay {
        display: none !important;
    }

    /* Botones más pequeños y OCULTAR botones innecesarios */
    .search-button-container,
    .copy-share-url-btn-container {
        flex-shrink: 0;
    }

    /* OCULTAR botones de filtros en mobile */
    .hide-contested-comps-btn-container,
    .hide-unselected-comps-btn-container,
    .copy-share-url-btn-container {
        display: none !important;
    }

    .search-button,
    .copy-share-url-btn {
        padding: 6px;
        min-width: 32px;
        height: 32px;
    }

    .search-button svg {
        width: 16px;
        height: 16px;
    }

    .animated-button {
        padding: 6px 12px;
        font-size: 0.7rem;
    }

    /* Unit cost indicators */
    [class^="unit-cost-"] {
        width: 30px;
        height: 30px;
    }

    /* Match history - hide complex elements */
    .match-traits,
    .match-player-stats,
    .match-player-companion {
        display: none !important;
    }

    .match-champs {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        gap: 2px;
    }

    .match-champ {
        width: 26px;
        height: 26px;
        margin: 1px;
        flex-shrink: 0;
    }

    .match-player-placement {
        width: 20px;
        height: 20px;
        font-size: 10px;
    }

    /* Rank displays */
    .rank-icon-data-container {
        display: none !important;
    }

    .rank-data-container {
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .titleStatDiv {
        display: none !important;
    }
}

/* =====================================================================
    Tablet - Medium screens
===================================================================== */
@media (min-width: 769px) and (max-width: 1024px) {
    html {
        font-size: 13px;
    }

    body {
        flex-direction: row;
    }

    #left {
        width: 25%;
        min-width: 200px;
    }

    #right {
        width: 45%;
    }

    #canvas-container {
        flex: 1;
        min-width: 200px;
    }

    /* Simplify some elements for tablets */
    .main-augment-item-container {
        display: none;
    }

    .items-container {
        max-width: 200px;
    }

    .unit-icons {
        min-width: 140px;
    }

    .unit-icons img {
        width: 26px;
        height: 26px;
    }

    /* Tables */
    .table-container div {
        grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)) !important;
        gap: 4px !important;
    }

    .table-container div div img {
        width: 32px !important;
        height: 32px !important;
    }

    /* Hide complex match elements */
    .match-traits,
    .match-player-stats,
    .match-player-companion {
        display: none !important;
    }

    .match-champs {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
    }

    .match-champ {
        width: 28px;
        height: 28px;
        margin: 2px;
    }

    .match-player-placement {
        width: 22px;
        height: 22px;
        font-size: 11px;
    }

    /* Popups */
    #popupOverlay {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90vw;
        height: 90vh;
        background: #1c1c2b;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }
}

/* =====================================================================
    Extra small screens (phones in landscape, small devices)
===================================================================== */
@media (max-width: 480px) {
    html, body {
        height: auto !important; /* Permitir altura natural */
        overflow: auto !important; /* Permitir scroll global */
        margin: 0;
        padding: 0;
    }

    body {
        height: auto !important; /* Altura natural */
        overflow: auto !important; /* Scroll global */
        display: flex !important;
        flex-direction: row !important;
        min-height: 100vh; /* Mínimo de pantalla completa */
    }

    /* Right panel - Sin scroll propio, usar scroll de página */
    #right {
        width: 40%;
        min-width: 120px;
        padding: 0.25rem;
        overflow-y: visible !important; /* No scroll propio */
        max-height: none !important; /* Sin límite de altura */
        display: flex;
        flex-direction: column;
        position: relative;
        box-sizing: border-box;
    }

    /* Contenedor de comps - Sin scroll propio */
    #comps {
        flex: 1 !important;
        overflow-y: visible !important; /* No scroll propio */
        max-height: none !important; /* Sin límite de altura */
        padding-right: 2px;
        min-height: auto !important; /* Altura natural */
        box-sizing: border-box;
    }

    /* Remover estilos de scrollbar personalizados */
    #comps::-webkit-scrollbar {
        display: none;
    }

    /* Composiciones aún más compactas */
    .item.compo {
        height: 24px !important;
        min-height: 24px !important;
        padding: 2px 3px 2px 0px !important;
        margin: 1px 0 !important;
        font-size: 0.7rem !important;
    }

    .comp-info {
        font-size: 0.7rem !important;
        min-width: 40px !important;
        font-weight: 600 !important;
    }

    .comp-style {
        flex: 0 0 18px !important;
        font-size: 0.6rem !important;
    }

    /* Border gradient para pantallas muy pequeñas */
    .border-gradient {
        width: 2px !important;
        left: -2px !important;
        height: 24px !important;
        border-radius: 3px 0 0 3px !important;
    }

    .item.compo {
        border-left: 2px solid transparent !important;
    }

    /* Left panel más estrecho */
    #left {
        width: 30%;
        min-width: 100px;
        padding: 0.25rem;
    }

    /* Canvas más estrecho pero visible */
    #canvas-container {
        flex: 1;
        min-width: 60px;
    }

    /* Search bars aún más compactas */
    .search-comp-bar {
        margin-bottom: 0.25rem;
    }

    .search-input {
        padding: 4px;
        font-size: 0.7rem;
    }
}

/* =====================================================================
    Large screens - Keep existing styles
===================================================================== */
@media (min-width: 1025px) {
    /* Desktop styles are in main CSS files */
}
